<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!--                                             -->
<!-- Author: KData                               -->
<!--                                             -->
<!--   Date: Tue Sep 25 14:34:46 2012            -->
<!--                                             -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>KOptimalKamper</title>
<meta name="rating" content="General" />
<meta name="objecttype" content="Manual" />
<meta name="keywords" content="software development, oo" />
<meta name="description" content="KData - data structure and analysis package for Edelweiss" />
<link rel="stylesheet" type="text/css" href="ROOT.css" id="ROOTstyle" />
<script type="text/javascript" src="ROOT.js"></script>
</head>
<body  onload="javascript:SetValuesFromCookie();"><div id="body_content">
<div id="kdata_header" align="center"><img src="kdata-logo.jpg" width="800" alt="Kdata + Edelweiss logo"/></div>
<a name="TopOfPage"></a>
<script type="text/javascript">WriteFollowPageBox('class KOptimalKamper','','/Users/adam/softwareDev/kdata/kamping/KOptimalKamper.h');</script>
<div id="toplinks">
<div class="descrhead"><div class="descrheadcontent">
<span class="descrtitle">Quick Links:</span>
<a class="descrheadentry" href="https://edwdev-ik.fzk.de">KData</a>
<a class="descrheadentry" href="http://root.cern.ch">ROOT Homepage</a>
<a class="descrheadentry" href="./ClassIndex.html">Class Index</a>
<a class="descrheadentry" href="./ClassHierarchy.html">Class Hierarchy</a></div>
<script type="text/javascript">
function onSearch() {
var s='http://www.google.com/search?q=%s+site%3A%u+-site%3A%u%2Fsrc%2F+-site%3A%u%2Fexamples%2F';
var ref=String(document.location.href).replace(/https?:\/\//,'').replace(/\/[^\/]*$/,'').replace(/\//g,'%2F');
window.location.href=s.replace(/%u/ig,ref).replace(/%s/ig,escape(document.searchform.t.value));
return false;}
</script>
<form id="searchform" name="searchform" onsubmit="return onSearch()" action="javascript:onSearch();" method="post">
<input name="t" size="30" value="Search documentation..." onfocus="if (document.searchform.t.value=='Search documentation...') document.searchform.t.value='';"></input>
<a id="searchlink"  title="www.google.com"  href="javascript:onSearch();" onclick="return onSearch()">Search</a></form>
</div>
<div class="descrhead"><div class="descrheadcontent">
<span class="descrtitle">Source:</span>
<a class="descrheadentry" href="src/KOptimalKamper.h.html">header file</a>
<a class="descrheadentry" href="src/KOptimalKamper.cxx.html">source file</a>
<a class="descrheadentry" href="KOptimalKamper_Tree.pdf">inheritance tree (.pdf)</a> 
</div></div>
<div class="descrhead"><div class="descrheadcontent">
<span class="descrtitle">Sections:</span>
<a class="descrheadentry" href="#KOptimalKamper:description">class description</a> 
<a class="descrheadentry" href="#KOptimalKamper:Function_Members">function members</a>
<a class="descrheadentry" href="#KOptimalKamper:Data_Members">data members</a>
<a class="descrheadentry" href="#KOptimalKamper:Class_Charts">class charts</a>
</div></div>
</div>
<div class="location">
<a class="locationlevel" href="index.html">KData</a>
 &#187; <a class="locationlevel" href="./KAMPING_Index.html">KAMPING</a>
 &#187; <a class="locationlevel" href="#TopOfPage">KOptimalKamper</a>
</div>
<div class="dropshadow"><div class="withshadow"><h1><a name="KOptimalKamper:description"></a>class KOptimalKamper: private <a href="./KAmper.html">KAmper</a></h1>
<div class="classdescr">
<pre>
 <a href="./KOptimalKamper.html">KOptimalKamper</a>.cxx
 KDataStructure

 Created by Adam Cox
 Copyright 2012 Karlsruhe Institute of Technology. All rights reserved.

 <a href="./KOptimalKamper.html#KOptimalKamper:MakeKamp" title="map&lt;std::string,KResult&gt; KOptimalKamper::MakeKamp(KRawBoloPulseRecord* rawPulseRecord) or overloads">MakeKamp</a> output map&lt;string, <a href="./KResult.html">KResult</a>&gt;

  string                |   description

   amp                      amplitude from the optimal filter at the peak position
   peakPosition             position in the optimal filter output
   chi2AtPeakPosition       the chi^2 value calculated by the optimal filter at peakPosition
   baselineRemoved          the amplitude of the baseline that was subtracted from the raw pulse before optimal filter. this is the DC offset of the raw pulse
                              this value is filled only if the <a href="./KOptimalKamper.html#KOptimalKamper:fPreProcessor" title="KPtaProcessor* KOptimalKamper::fPreProcessor">fPreProcessor</a> object was a <a href="./KPulseAnalysisChain.html">KPulseAnalysisChain</a> that contained
                              either a <a href="./KBaselineRemoval.html">KBaselineRemoval</a> or <a href="./KLinearRemoval.html">KLinearRemoval</a> object
   fixPeakPosition          the value of fixPeakPosition that was passed into <a href="./KOptimalKamper.html#KOptimalKamper:MakeKamp" title="map&lt;std::string,KResult&gt; KOptimalKamper::MakeKamp(KRawBoloPulseRecord* rawPulseRecord) or overloads">MakeKamp</a> (when fixPeakPosition &gt; 0, then peakPosition == fixPeakPosition)

                            If fixPeakPosition &lt; 0 (meaning it was ignored), then the following results will be fund in the output map

   pulseTemplateShift       the time shift of the pulse template
   amplitudeShift           an extra time shift used to measure the baseline amplitude
   ampAtTemplatePluseAmplitudeShift   the amplitude estimated by the optimal filter at the pulseTemplateShift+amplitudeShift position
   minChi2                  the minimum value of the chi^2 as a function of pulse start time
   minChi2Pos               the time(bin number) of the pulse where chi^2 is at a minimum
   optAmpAtMinChi2          amplitude from the optimal filter at minChi2Pos
   pulseAmpAtOptimalAmpPeakPosition   amplitude of the preProcessed+Windowed pulse at peakPosition
   pulseAmpAtMinChi2Position          amplitude of the preProcessed+Windowed pulse at minChi2Pos
   risetime                 crude estimate of the 10-90% risetime
   pulsewidth               crude estimate of the 10% - 10% pulse width
</pre></div>
</div></div>

<div id="functions">
<h2><a id="KOptimalKamper:Function_Members"></a>Function Members (Methods)</h2>
<div class="access" id="funcpubl"><b>public:</b>
<table class="func" id="tabfuncpubl" cellspacing="0">
<tr class="func"><td class="funcret"></td><td class="funcname"><a class="funcname" href="#KOptimalKamper:KOptimalKamper">KOptimalKamper</a>()</td></tr>
<tr class="func"><td class="funcret"></td><td class="funcname"><a class="funcname" href="#KOptimalKamper:KOptimalKamper@1">KOptimalKamper</a>(<span class="keyword">const</span> <a href="./KOptimalKamper.html">KOptimalKamper</a>&amp;)</td></tr>
<tr class="func"><td class="funcret"> virtual</td><td class="funcname"><a class="funcname" href="#KOptimalKamper:_KOptimalKamper">~KOptimalKamper</a>()</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">double</span></td><td class="funcname"><a class="funcname" href="#KOptimalKamper:GetAmplitudeEstimatorSearchRange">GetAmplitudeEstimatorSearchRange</a>() <span class="keyword">const</span></td></tr>
<tr class="func"><td class="funcret"><a href="./KOptimalFilter.html">KOptimalFilter</a>&amp;</td><td class="funcname"><a class="funcname" href="#KOptimalKamper:GetOptimalFilter">GetOptimalFilter</a>()</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">int</span></td><td class="funcname"><a class="funcname" href="#KOptimalKamper:GetPulseAmplitudeShift">GetPulseAmplitudeShift</a>()</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">double</span></td><td class="funcname"><a class="funcname" href="#KOptimalKamper:GetPulseTemplateShiftFromPreTrigger">GetPulseTemplateShiftFromPreTrigger</a>() <span class="keyword">const</span></td></tr>
<tr class="func"><td class="funcret">virtual map&lt;std::string,<a href="./KResult.html">KResult</a>&gt;</td><td class="funcname"><a class="funcname" href="#KOptimalKamper:MakeKamp">MakeKamp</a>(<a href="./KRawBoloPulseRecord.html">KRawBoloPulseRecord</a>* rawPulseRecord)</td></tr>
<tr class="func"><td class="funcret">virtual map&lt;std::string,<a href="./KResult.html">KResult</a>&gt;</td><td class="funcname"><a class="funcname" href="#KOptimalKamper:MakeKamp@1">MakeKamp</a>(<a href="./KRawBoloPulseRecord.html">KRawBoloPulseRecord</a>* rawPulseRecord, <span class="keyword">double</span> fixPeakPosition)</td></tr>
<tr class="func"><td class="funcret"><a href="./KOptimalKamper.html">KOptimalKamper</a>&amp;</td><td class="funcname"><a class="funcname" href="#KOptimalKamper:operator_">operator=</a>(<span class="keyword">const</span> <a href="./KOptimalKamper.html">KOptimalKamper</a>&amp;)</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#KOptimalKamper:SetAmplitudeEstimatorSearchRange">SetAmplitudeEstimatorSearchRange</a>(<span class="keyword">double</span> aVal)</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#KOptimalKamper:SetIonPulseStartTime">SetIonPulseStartTime</a>(<span class="keyword">double</span> peakPos)</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#KOptimalKamper:SetPreProcessor">SetPreProcessor</a>(<a href="./KPtaProcessor.html">KPtaProcessor</a>* pta)</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#KOptimalKamper:SetPulseAmplitudeShift">SetPulseAmplitudeShift</a>(<span class="keyword">int</span> a)</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#KOptimalKamper:SetPulseTemplateShiftFromPreTrigger">SetPulseTemplateShiftFromPreTrigger</a>(<span class="keyword">double</span> aVal)</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#KOptimalKamper:SetWindow">SetWindow</a>(<a href="./KWindow.html">KWindow</a>* pta)</td></tr>

</table></div>
<div class="access" id="funcpriv"><b>private:</b>
<table class="func" id="tabfuncpriv" cellspacing="0">
<tr class="funcinh"><td class="funcret">virtual <span class="keyword">const</span> <span class="keyword">char</span>*</td><td class="funcname"><a class="funcname" href="./KAmper.html#KAmper:GetName"><span class="baseclass">KAmper::</span>GetName</a>()</td></tr>
<tr class="funcinh"><td class="funcret">virtual <span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="./KAmper.html#KAmper:SetName"><span class="baseclass">KAmper::</span>SetName</a>(<span class="keyword">const</span> <span class="keyword">char</span>* name)</td></tr>

</table></div>
</div>

<div id="datamembers">
<h2><a name="KOptimalKamper:Data_Members"></a>Data Members</h2>
<div class="access" id="datapriv"><b>private:</b>
<table class="data" id="tabdatapriv" cellspacing="0">
<tr class="data"><td class="datatype"><span class="keyword">double</span></td><td class="dataname"><a name="KOptimalKamper:fAmplitudeEstimatorSearchRange"></a>fAmplitudeEstimatorSearchRange</td><td></td></tr>
<tr class="data"><td class="datatype"><span class="keyword">double</span></td><td class="dataname"><a name="KOptimalKamper:fIonPulsePeakPos"></a>fIonPulsePeakPos</td><td></td></tr>
<tr class="data"><td class="datatype"><a href="./KOptimalFilter.html">KOptimalFilter</a></td><td class="dataname"><a name="KOptimalKamper:fOptimalFilter"></a>fOptimalFilter</td><td></td></tr>
<tr class="data"><td class="datatype"><a href="./KPtaProcessor.html">KPtaProcessor</a>*</td><td class="dataname"><a name="KOptimalKamper:fPreProcessor"></a>fPreProcessor</td><td class="datadesc">this should probably be baseline removal will always happen before windowing. Its a KPtaProcessor in case you want to pass in a KLinearRemoval instead.</td></tr>
<tr class="data"><td class="datatype"><span class="keyword">int</span></td><td class="dataname"><a name="KOptimalKamper:fPulseAmplitudeShift"></a>fPulseAmplitudeShift</td><td></td></tr>
<tr class="data"><td class="datatype"><span class="keyword">double</span></td><td class="dataname"><a name="KOptimalKamper:fPulseTemplateShift"></a>fPulseTemplateShift</td><td></td></tr>
<tr class="data"><td class="datatype"><a href="./KRealToHalfComplexDFT.html">KRealToHalfComplexDFT</a></td><td class="dataname"><a name="KOptimalKamper:fR2Hc"></a>fR2Hc</td><td></td></tr>
<tr class="data"><td class="datatype"><a href="./KWindow.html">KWindow</a>*</td><td class="dataname"><a name="KOptimalKamper:fWindow"></a>fWindow</td><td class="datadesc">set the window pointer - this lets you choose different windows via KWindowDesign</td></tr>

</table></div>
</div>
<h2><a id="KOptimalKamper:Class_Charts"></a>Class Charts</h2>
<!--INHERITANCE TREE-->
<table><tr><td width="10%"></td><td width="70%"><a href="ClassHierarchy.html">Inheritance Chart</a>:</td></tr><tr class="inhtree"><td width="10%"></td><td width="70%"><table class="inhtree"><tr><td>
<table width="100%" border="0" cellpadding ="0" cellspacing="2"><tr>
<td><table><tr>
<td bgcolor="#f7f7f7" align="right">
<table><tr><td>
<center><tt><a name="KAmper" href="./KAmper.html">KAmper</a></tt></center>
</td>
</tr></table>
</td>
</tr></table></td>
<td>&larr;</td><td>
<center><big><b><tt><a name="KOptimalKamper" href="./KOptimalKamper.html">KOptimalKamper</a></tt></b></big></center>
</td>
<td><table><tr>
<td></td>
</tr></table></td>
</tr></table>
</td></tr></table></td></tr></table>
<h2>Function documentation</h2>
<div class="funcdoc"><span class="funcname"> <a class="funcname" name="KOptimalKamper:KOptimalKamper@1" href="src/KOptimalKamper.cxx.html#l_N3l">KOptimalKamper</a>(<span class="keyword">const</span> <a href="./KOptimalKamper.html">KOptimalKamper</a>&amp; )</span><br />
</div>
<div class="funcdoc"><span class="funcname"> <a class="funcname" name="KOptimalKamper:_KOptimalKamper" href="src/KOptimalKamper.cxx.html#cWxS6">~KOptimalKamper</a>(<span class="keyword">void</span>)</span><br />
</div>
<div class="funcdoc"><span class="funcname">std::map&lt;std::string, <a href="./KResult.html">KResult</a>&gt; <a class="funcname" name="KOptimalKamper:MakeKamp" href="src/KOptimalKamper.cxx.html#mG4jcC">MakeKamp</a>(<a href="./KRawBoloPulseRecord.html">KRawBoloPulseRecord</a>* rawPulseRecord)</span><br />
</div>
<div class="funcdoc"><span class="funcname">std::map&lt;std::string, <a href="./KResult.html">KResult</a>&gt; <a class="funcname" name="KOptimalKamper:MakeKamp@1" href="src/KOptimalKamper.cxx.html#Fc5dsE">MakeKamp</a>(<a href="./KRawBoloPulseRecord.html">KRawBoloPulseRecord</a>* rawPulseRecord, <span class="keyword">double</span> fixPeakPosition)</span><br />
<div class="funccomm"><pre>make sure that you set up the Optimal Filter properly before each event. This means you have to
set the optimal filter's noise and template power spectra before <a href="./KOptimalKamper.html#KOptimalKamper:MakeKamp" title="map&lt;std::string,KResult&gt; KOptimalKamper::MakeKamp(KRawBoloPulseRecord* rawPulseRecord) or overloads">MakeKamp</a> gets called.
Do this inside of the <a href="./KAmpSite.html">KAmpSite</a> that is using this <a href="./KAmper.html">KAmper</a>.

if the rawPulseRecord-&gt;GetPulseLength() == 0
this kamper returns an empty map
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"> <a class="funcname" name="KOptimalKamper:KOptimalKamper@1" href="src/KOptimalKamper.h.html#dI51LB">KOptimalKamper</a>(<span class="keyword">const</span> <a href="./KOptimalKamper.html">KOptimalKamper</a>&amp; )</span><br />
</div>
<div class="funcdoc"><span class="funcname"><a href="./KOptimalFilter.html">KOptimalFilter</a>&amp; <a class="funcname" name="KOptimalKamper:GetOptimalFilter" href="src/KOptimalKamper.h.html#JdfgvC">GetOptimalFilter</a>(<span class="keyword">void</span>)</span><br />

<div class="code"><code class="inlinecode">{<span class="keyword">return</span> <a href="./KOptimalKamper.html#KOptimalKamper:fOptimalFilter" title="KOptimalFilter KOptimalKamper::fOptimalFilter">fOptimalFilter</a>;}</code></div>
<div style="clear:both;"></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">void</span> <a class="funcname" name="KOptimalKamper:SetWindow" href="src/KOptimalKamper.h.html#Xg1lB">SetWindow</a>(<a href="./KWindow.html">KWindow</a>* pta)</span><br />

<div class="code"><code class="inlinecode">{<a href="./KOptimalKamper.html#KOptimalKamper:fWindow" title="KWindow* KOptimalKamper::fWindow">fWindow</a> = pta;}</code></div>
<div style="clear:both;"></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">void</span> <a class="funcname" name="KOptimalKamper:SetPreProcessor" href="src/KOptimalKamper.h.html#YNgo_D">SetPreProcessor</a>(<a href="./KPtaProcessor.html">KPtaProcessor</a>* pta)</span><br />

<div class="code"><code class="inlinecode">{<a href="./KOptimalKamper.html#KOptimalKamper:fPreProcessor" title="KPtaProcessor* KOptimalKamper::fPreProcessor">fPreProcessor</a> = pta;}</code></div>
<div style="clear:both;"></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">void</span> <a class="funcname" name="KOptimalKamper:SetPulseAmplitudeShift" href="src/KOptimalKamper.h.html#Stp1UB">SetPulseAmplitudeShift</a>(<span class="keyword">int</span> a)</span><br />

<div class="code"><code class="inlinecode">{<a href="./KOptimalKamper.html#KOptimalKamper:fPulseAmplitudeShift" title="int KOptimalKamper::fPulseAmplitudeShift">fPulseAmplitudeShift</a> = a;}</code></div>
<div style="clear:both;"></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">void</span> <a class="funcname" name="KOptimalKamper:SetPulseTemplateShiftFromPreTrigger" href="src/KOptimalKamper.h.html#EnU98">SetPulseTemplateShiftFromPreTrigger</a>(<span class="keyword">double</span> aVal)</span><br />

<div class="code"><code class="inlinecode">{<a href="./KOptimalKamper.html#KOptimalKamper:fPulseTemplateShift" title="double KOptimalKamper::fPulseTemplateShift">fPulseTemplateShift</a> = -1*aVal;}</code></div>
<div style="clear:both;"></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">void</span> <a class="funcname" name="KOptimalKamper:SetAmplitudeEstimatorSearchRange" href="src/KOptimalKamper.h.html#zf_AdE">SetAmplitudeEstimatorSearchRange</a>(<span class="keyword">double</span> aVal)</span><br />

<div class="code"><code class="inlinecode">{<a href="./KOptimalKamper.html#KOptimalKamper:fAmplitudeEstimatorSearchRange" title="double KOptimalKamper::fAmplitudeEstimatorSearchRange">fAmplitudeEstimatorSearchRange</a> = aVal;}</code></div>
<div style="clear:both;"></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">double</span> <a class="funcname" name="KOptimalKamper:GetPulseTemplateShiftFromPreTrigger" href="src/KOptimalKamper.h.html#r64x7B">GetPulseTemplateShiftFromPreTrigger</a>(<span class="keyword">void</span>)</span><br />

<div class="code"><code class="inlinecode">{<span class="keyword">return</span> <a href="./KOptimalKamper.html#KOptimalKamper:fPulseTemplateShift" title="double KOptimalKamper::fPulseTemplateShift">fPulseTemplateShift</a>;}</code></div>
<div style="clear:both;"></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">double</span> <a class="funcname" name="KOptimalKamper:GetAmplitudeEstimatorSearchRange" href="src/KOptimalKamper.h.html#uTLYv">GetAmplitudeEstimatorSearchRange</a>(<span class="keyword">void</span>)</span><br />

<div class="code"><code class="inlinecode">{<span class="keyword">return</span> <a href="./KOptimalKamper.html#KOptimalKamper:fAmplitudeEstimatorSearchRange" title="double KOptimalKamper::fAmplitudeEstimatorSearchRange">fAmplitudeEstimatorSearchRange</a>;}</code></div>
<div style="clear:both;"></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">int</span> <a class="funcname" name="KOptimalKamper:GetPulseAmplitudeShift" href="src/KOptimalKamper.h.html#c65NWD">GetPulseAmplitudeShift</a>(<span class="keyword">void</span>)</span><br />

<div class="code"><code class="inlinecode">{<span class="keyword">return</span> <a href="./KOptimalKamper.html#KOptimalKamper:fPulseAmplitudeShift" title="int KOptimalKamper::fPulseAmplitudeShift">fPulseAmplitudeShift</a>;}</code></div>
<div style="clear:both;"></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">void</span> <a class="funcname" name="KOptimalKamper:SetIonPulseStartTime" href="src/KOptimalKamper.h.html#HK6T6D">SetIonPulseStartTime</a>(<span class="keyword">double</span> peakPos)</span><br />

<div class="code"><code class="inlinecode">{<a href="./KOptimalKamper.html#KOptimalKamper:fIonPulsePeakPos" title="double KOptimalKamper::fIonPulsePeakPos">fIonPulsePeakPos</a> = peakPos;}</code></div>
<div style="clear:both;"></div>
</div>

<br />
<!--SIGNATURE-->
<div id="footer">

<em>&raquo; Last changed: Tue Sep 25 14:34:46 2012 </em><em>&raquo; Last generated: 2012-09-25 14:34</em><br />
<em>This page has been automatically generated. For comments or suggestions regarding the documentation or ROOT in general please send a mail to <a href="mailto:rootdev@root.cern.ch">ROOT support</a>.</em>
</div>
</div>
</body>
</html>
