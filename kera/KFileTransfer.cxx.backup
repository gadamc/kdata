//_____________________________________________
//
// KFileTransfer.cxx
// KDataStructure
//
// Author: Daniel Wegner <mailto:Daniel.Wegner@student.kit.edu> on 8/26/10.
//
// * Copyright 2010 Karlsruhe Institute of Technology. All rights reserved.
//
//

#include "KFileTransfer.h"

KFileTransfer::KFileTransfer(string aHostName, string aUsername, string aPassword,unsigned int aPort,string aDir)  {


    //setting options for SSH connection


    fOptions = options_new();
    // Int_t ret = option_set_wanted_method(fOptions,KEX_COMP_C_S,"zlib");
    options_set_host(fOptions,aHostName.c_str());
    if(port)
        options_set_port(fOptions,aPort);
    options_set_username(fOptions,aUsername.c_str());
    options_set_ssh_dir(fOptions,aDir.c_str());



}

KFileTransfer::Connect(void) {

    fSession = ssh_connect(fOptions);



    Int_t ret = ssh_is_serverknown(fSession);
    if(ret==SSH_SERVER_NOT_KNOWN)
        ssh_write_knownhost(fSession);

}

KFileTransfer::Authenticate(void) {

    //interactive keyboard login

    Int_t ret = ssh_userauth_kbdint(fSession);




}

KFileTransfer::Disconnect(void) {

    ssh_disconnect(fSession);

}

KFileTransfer::~KFileTransfer(void) {
    Disconnect();
}

ClassImp(KFileTransfer);

